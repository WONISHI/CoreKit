# 配置参数 (Parameters)
配置参数主要分为 全局选项 (WatermarkOptions) 和 内容节点 (WatermarkContent) 两部分。

## 1 全局配置项 (WatermarkOptions)
当调用 Watermark.apply({ ... }) 时，根对象支持以下属性。这些属性定义了水印的整体行为和默认样式。

| 属性名 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| content | `string \| any[] \| object` | — | 水印内容，支持字符串、数组或完整配置对象。 |
| width | `number` | `auto` | 单个水印瓦片（Tile）的宽度。不填则根据内容自适应。 |
| height | `number` | `auto` | 单个水印瓦片（Tile）的高度。 |
| rotate | `number` | `-20` | 水印旋转角度（单位：度）。负数表示逆时针旋转。 |
| zIndex | `number` | `9999` | 水印层 DOM 的 z-index 层级。 |
| alpha | `number` | — | （可选）透明度，通常建议直接在 `fontColor` 中使用 `rgba` 设置。 |
| gap | `[number, number]` | `[100, 100]` | 水印瓦片在 X / Y 方向的间距。 |
| offset | `[number, number]` | `[20, 20]` | 水印层相对于容器左上角的起始偏移量。 |
| layout | `string` | `'repeat'` | 布局模式：`repeat` 全屏平铺；`center` 居中显示一个；`rb` 右下角显示。 |
| monitor | `boolean` | `true` | 是否开启 `MutationObserver` 防篡改监控。开启后删除水印节点会自动重建。 |
| el | `string \| HTMLElement` | `document.body` | 水印挂载的容器，支持 CSS 选择器或 DOM 元素。 |
| fontSize | `number` | `16` | 全局默认字体大小（px）。 |
| fontColor | `string` | `'rgba(0,0,0,0.15)'` | 全局默认字体颜色。 |
| fontFamily | `string` | `sans-serif` | 全局默认字体族。 |
| fontWeight | `string` | `'normal'` | 全局默认字重（如 `'bold'`、`'normal'`、`'300'` 等）。 |


## 2 内容节点结构 (WatermarkContent)
当 content 传入对象时，通过嵌套组合 Group、Text 和 Image 节点来实现复杂布局。

**通用属性 (Base Node)**
所有节点都支持的属性：type: 'text' | 'image' | 'group' (必填)

### 1.文本节点 (type: 'text')

| 属性名 | 类型 | 说明 |
|------|------|------|
| text | `string` | 文本内容。支持 `\n` 或 `<br>` 换行。换行后会自动拆分为垂直布局的 Group，并继承父级 `gap`。 |
| fontSize | `number` | 字体大小（覆盖全局配置）。 |
| fontColor | `string` | 字体颜色（覆盖全局配置）。 |
| fontWeight | `string` | 字重。 |
| fontFamily | `string` | 字体族。 |


### 2. 图片节点 (type: 'image')

| 属性名 | 类型 | 说明 |
|------|------|------|
| image | `string` | 图片地址（URL 或 Base64）。建议预先加载或使用 CDN 地址。 |
| width | `number` | 图片渲染宽度（px）。 |
| height | `number` | 图片渲染高度（px）。 |


### 3. 分组节点 (type: 'group')
这是实现 Flex 布局的核心。

| 属性名 | 类型 | 说明 |
|------|------|------|
| items | `Array<Node>` | 子节点数组。可以包含 `Text`、`Image` 或嵌套的 `Group`。 |
| layout | `'row' \| 'column'` | 排列方向：`row` 水平排列（左图右文）；`column` 垂直排列（上图下文）。 |
| gap | `number` | 组内元素之间的间距。**重要**：此属性会被子元素继承（例如子文本自动换行时，行间距会使用该值）。 |


## 3.配置示例 (Configuration Example)

```js
const options = {
  // 全局画布设置
  width: 300,
  height: 200,
  rotate: -15,
  gap: [50, 50], // 瓦片间距
  
  // 复杂内容结构
  content: {
    type: 'group',
    layout: 'row', // 水平布局
    gap: 20,       // 左右两栏的间距
    items: [
      // 左侧：图片
      {
        type: 'image',
        image: '/logo.png',
        width: 40,
        height: 40
      },
      // 右侧：垂直文字组
      {
        type: 'group',
        layout: 'column',
        gap: 5, // 文字行间距 (会被内部的换行继承)
        items: [
          {
            type: 'text',
            text: 'CONFIDENTIAL',
            fontSize: 16,
            fontWeight: 'bold',
            fontColor: 'red'
          },
          {
            type: 'text',
            text: 'UID: 9527\n2023-12-31', // 这里会自动拆分，并使用 gap: 5
            fontSize: 12,
            fontColor: '#666'
          }
        ]
      }
    ]
  }
};

Watermark.apply(options);
```

